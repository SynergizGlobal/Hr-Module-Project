FROM eclipse-temurin:21-jdk

WORKDIR /app

ARG CLIENT_SECRET
ARG CLIENT_URL
ARG DB_PASSWORD
ARG MAIL_SENDER
ARG MAIL_PASSWORD
ARG ACCESS_KEY
ARG SECRET_KEY
ARG S3_BUCKET

ENV CLIENT_SECRET=$CLIENT_SECRET
ENV CLIENT_URL=$CLIENT_URL
ENV DB_PASSWORD=$DB_PASSWORD
ENV MAIL_SENDER=${MAIL_SENDER}
ENV MAIL_PASSWORD=$MAIL_PASSWORD
ENV ACCESS_KEY=$ACCESS_KEY
ENV SECRET_KEY=$SECRET_KEY
ENV S3_BUCKET=$S3_BUCKET

COPY target/backend-0.0.1-SNAPSHOT.jar backend-0.0.1-SNAPSHOT.jar

EXPOSE 8080

CMD ["java", "-jar", "backend-0.0.1-SNAPSHOT.jar"]
